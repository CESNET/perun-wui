name: Semantic release
on:
    push:
        branches-ignore:
            - master
        tags-ignore:
            - v*
jobs:
    semantic-release:
        name: Semantic release
        runs-on: ubuntu-latest
        steps:
            -   name: Checkout
                uses: actions/checkout@v3
            -   name: Setup Node.js
                uses: actions/setup-node@v3
                with:
                    node-version: "lts/*"
            -   name: Install dependencies
                run: npm ci
            -   name: "Set up JDK"
                uses: actions/setup-java@v3
                with:
                    java-version: 17
            -   name: "Cache"
                uses: actions/cache@v3
                with:
                    path: ~/.m2/repository
                    key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
                    restore-keys: |
                        ${{ runner.os }}-maven-
            -   name: Release
                id: semantic
                env:
                    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                run: npx semantic-release
